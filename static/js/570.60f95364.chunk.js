"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[570],{4784:function(e,t,n){n.d(t,{Z:function(){return a}});var s=n(184);function a(){return(0,s.jsx)("div",{className:"d-flex justify-content-center","data-aos":"fade-up",children:(0,s.jsx)("h3",{className:"font-secondary",children:"Something went wrong ;("})})}},570:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var s=n(4165),a=n(3433),r=n(5861),c=n(9439),l=n(2791),i=n(1243),o=n(1087),d=n(2426),u=n.n(d),m=n(4784),f=n(184);function h(){var e=(0,l.useState)([]),t=(0,c.Z)(e,2),n=t[0],d=t[1],h=(0,l.useState)(0),p=(0,c.Z)(h,2),x=p[0],b=p[1],j=(0,l.useState)(!1),y=(0,c.Z)(j,2),N=y[0],g=y[1],v=(0,l.useState)(!1),Z=(0,c.Z)(v,2),w=Z[0],k=Z[1],S=(0,l.useState)(!1),M=(0,c.Z)(S,2),A=M[0],C=M[1],D=(0,l.useState)([]),E=(0,c.Z)(D,2),_=E[0],z=E[1],I=document.querySelector("#deleteModal");function R(){return F.apply(this,arguments)}function F(){return(F=(0,r.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.get("/api/emails?sort=createdAt&direction=desc").then((function(e){e.data<1&&k(!0),d(e.data),b(e.data.length)})).catch((function(e){g(!0),console.log(e.response)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,l.useEffect)((function(){R()}),[]);var H=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z([].concat((0,a.Z)(_),[t])),b((function(e){return e-1===0&&k(!0),e-1})),e.next=4,i.Z.delete("/api/emails/".concat(t)).then((function(e){return console.log(e)})).catch((function(e){return console.log(e.response)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,i.Z.delete("/api/emails").then((function(){window.bootstrap.Modal.getInstance(I).hide(),R()})).catch((function(e){return console.log(e.response)})).finally((function(){return C(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("h1",{className:"fw-bold font-primary mb-3","data-aos":"fade-right",children:"EMAIL"}),N?(0,f.jsx)(m.Z,{}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"d-flex mb-4 justify-content-between align-items-center px-3 py-2 tertiary",style:{borderRadius:"10px"},"data-aos":"fade-up",children:[(0,f.jsxs)("span",{className:"font-secondary",children:["There are ",x," Emails"]}),(0,f.jsx)("span",{className:"cool-btn-dark py-2 px-3",style:{aspectRatio:"unset",borderRadius:"20px"},"data-bs-toggle":"modal","data-bs-target":"#deleteModal",children:(0,f.jsx)("span",{className:"text-danger text-end",style:{cursor:"pointer"},children:"Delete All"})})]}),w&&(0,f.jsx)("div",{className:"d-flex justify-content-center mt-5",style:{position:"absolute",right:"25%",left:"25%"},children:(0,f.jsx)("h1",{className:"font-primary text-center",children:"No Emails"})}),n.map((function(e){return(0,f.jsxs)("div",{className:"".concat(_.includes(e._id)?"deleting":"show-email"),children:[(0,f.jsx)("hr",{className:"m-0 mb-1"}),(0,f.jsxs)("div",{className:"email-container mb-1 d-flex justify-content-start align-items-center",children:[(0,f.jsx)(o.rU,{to:"/admin/email/".concat(e._id),className:"w-100 p-3 d-flex justify-content-between",children:(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"font-primary m-0",children:e.name}),(0,f.jsx)("p",{className:"font-secondary m-0",style:{fontSize:"12px"},children:e.subject}),(0,f.jsx)("p",{className:"font-secondary m-0",style:{fontSize:"12px"},children:e.message})]})}),(0,f.jsx)("div",{style:{position:"absolute",right:"10px",top:"10px"},children:(0,f.jsx)("p",{className:"font-secondary m-0 text-end",style:{fontSize:"12px"},children:u()(e.createdAt).format("HH:mm, MMMM Do")})}),(0,f.jsx)("div",{style:{position:"absolute",right:"10px",bottom:"10px"},onClick:function(){return H(e._id)},children:(0,f.jsx)("span",{className:"cool-btn-dark",children:(0,f.jsx)("i",{className:"fa-solid fa-trash text-danger"})})})]})]},e._id)})),(0,f.jsx)("div",{className:"modal fade",id:"deleteModal",tabIndex:"-1","aria-hidden":"true",children:(0,f.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:(0,f.jsxs)("div",{className:"modal-content tertiary",children:[(0,f.jsxs)("div",{className:"modal-header","data-bs-theme":"dark",children:[(0,f.jsx)("h1",{className:"modal-title fs-5 ",children:"Delete Email"}),(0,f.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),(0,f.jsxs)("div",{className:"modal-body ",children:["Are you sure want to delete ",(0,f.jsx)("b",{className:"",children:"All"}),"?",(0,f.jsxs)("div",{className:"mt-5 d-flex gap-2 justify-content-end",children:[(0,f.jsx)("button",{type:"button",className:"btn btn-cancel","data-bs-dismiss":"modal",children:"Cancel"}),A?(0,f.jsx)("button",{type:"button",className:"btn btn-danger",disabled:!0,children:"Deleting..."}):(0,f.jsx)("button",{type:"button",className:"btn btn-danger",onClick:q,children:"Delete"})]})]})]})})})]})]})}}}]);
//# sourceMappingURL=570.60f95364.chunk.js.map